# Настройка проекта

## Подключение Firebase к проекту

Для работы приложения необходимо подключить его к вашему проекту в Firebase.

### 1. Создание проекта в Firebase
1. Перейдите в [Firebase Console](https://console.firebase.google.com/)
2. Создайте новый проект или выберите существующий

### 2. Регистрация Android-приложения
1. В вашем проекте нажмите "Добавить приложение" и выберите Android (</>)
2. Укажите package name вашего приложения (например, `com.вашеимя.nogravityzone`)
3. Скачайте файл конфигурации `google-services.json`

### 3. Добавление конфигурационного файла
Поместите скачанный файл `google-services.json` в папку `app/` вашего Android-проекта.

### 4. Настройка зависимостей
Убедитесь, что в файле `app/build.gradle` добавлены необходимые зависимости Firebase (рекомендуется использовать BOM). Плагин Google Services должен быть подключен в обоих файлах `build.gradle` (на уровне проекта и модуля app).

## Включение сервисов Firebase

### Аутентификация
1. Перейдите в раздел Authentication → Sign-in method
2. Включите метод "Email/Password"

### База данных Firestore
1. Перейдите в Firestore Database
2. Нажмите "Create database"
3. Для разработки выберите режим **Test mode** (разрешает полный доступ - перед релизом обязательно настройте Security Rules!)
4. Выберите регион, ближайший к вашим пользователям

### Хранилище (Storage)
1. Перейдите в Storage
2. Нажмите "Get started"
3. Используйте стандартные правила доступа для начала разработки (разрешить чтение/запись для аутентифицированных пользователей)

## Важно! Настройка правил безопасности
Перед публикацией приложения обязательно настройте Security Rules для Firestore и Storage, чтобы защитить данные пользователей. Режимы по умолчанию слишком открыты для продакшена.

## Индексы в Cloud Firestore

Приложение использует сложные запросы с фильтрацией и сортировкой, которые требуют создания составных индексов.

### Как создать индексы (простой способ)
1. Запустите приложение и используйте функционал, который выполняет сложные запросы
2. Проверьте Logcat - если запросу нужен индекс, Firestore выведет ошибку с прямой ссылкой
3. Перейдите по ссылке - она откроет консоль Firebase с предзаполненными параметрами индекса
4. Подтвердите создание индекса

Создание индекса может занять некоторое время в зависимости от объема данных.

### Типовые запросы, требующие индексов
- Получение постов пользователя (фильтр по ID автора + сортировка по времени)
- Загрузка ленты (фильтр по нескольким ID авторов + сортировка)
- Комментарии к постам (фильтр по ID поста + сортировка)
- Сортировка тренировок по количеству лайков/сохранений

## Рекомендации по безопасности
1. Всегда настраивайте правила доступа перед релизом
2. Не используйте тестовый режим в продакшене
3. Регулярно проверяйте логи доступа в Firebase Console